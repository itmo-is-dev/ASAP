@using Kysect.Shreks.WebUI.AdminPanel.Identity
@using Kysect.Shreks.WebUI.AdminPanel.Components.Global
@using Kysect.Shreks.WebUI.AdminPanel.ExceptionHandling
@using Kysect.Shreks.WebUI.AdminPanel.Extensions
@inject IIdentityManager IdentityManager
@inject ISafeExecutor Executor

<Bar Breakpoint="Breakpoint.Desktop"
     Background="Background.Light"
     ThemeContrast="ThemeContrast.Light">

    <BarBrand>
        <Anchor To="/" TextColor="TextColor.Dark">
            Shreks
        </Anchor>
    </BarBrand>

    <BarToggler/>

    <BarMenu>
        <BarStart>
            @if (HasIdentity)
            {
                <BarItem>
                    <BarLink To="adminpanel/global">Global</BarLink>
                </BarItem>

                <BarItem>
                    <BarLink To="adminpanel/subjects">Subjects</BarLink>
                </BarItem>

                <BarItem>
                    <BarLink To="adminpanel/students">Students</BarLink>
                </BarItem>
            }
        </BarStart>

        <BarEnd>
            @if (HasIdentity)
            {
                <BarItem>
                    <BarLink To="logout">Logout</BarLink>
                </BarItem>
            }
        </BarEnd>
    </BarMenu>
</Bar>

@code {

    public bool HasIdentity;
    private int _counter;

    protected override async Task OnInitializedAsync()
    {
        HasIdentity = await IdentityManager.HasIdentityAsync(default);
    }

}